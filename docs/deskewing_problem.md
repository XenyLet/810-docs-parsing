Для того, чтобы алгоритм корректно находил горизонтальные линии, их нужно выровнять 
(линии с каким-либо наклоном "обрываются"). Выравнивание происходит так:
1. Ищется самый большой контур на изображении
2. лишнее от этого контура отсекается с помощью алгоритма Douglas-Peucker

После этапа 2 остаются 4 точки
Трансформация строится на основе этих четырех точек и прямоугольника, ограничивающего эти точки

Проблемы начинаются, когда форма контура не похожа на прямоугольник (см. deskewing_problem_illustration_1.png)

Для того, чтобы корректно обработать такое изображение, необходимо свести эту форму к прямоугольнику.

Алгоритм:
1. Найти больше углов. Не 4, а 6 (ABCDEF на иллюстрации)
2. "отсечь" выдающийся участок контура (ADB на иллюстрации)

Проблема 2: для корректного определения точек для построения прямых нужно точно знать , что они не будут менться местами 
в разных документах. Как сортировать?

Для того, чтобы отсечь выдающийся участок, нам нужно создать еще одну точку.
Это мы будем делать с помощью построения прямых по уже найденным углам (CD и BF).
Точка, которая окажется на их пересечении и будет новым "углом"

Далее отбрасываем точки B, A, D и работаем с контуром как с прямоугольником